<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SEO Checker - 批量检查</title>
    <link rel="stylesheet" href="batch-check.css">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <button id="back-btn" class="btn btn-icon" title="返回">
                    <span class="icon">←</span>
                </button>
                <h1>批量SEO检查</h1>
            </div>
            <div class="header-right">
                <button id="help-btn" class="btn btn-icon" title="帮助">
                    <span class="icon">?</span>
                </button>
            </div>
        </header>

        <!-- URL Input Section -->
        <section class="url-input-section">
            <div class="section-header">
                <h3>添加检查URL</h3>
                <div class="url-count">
                    <span id="url-count">0</span> 个URL
                </div>
            </div>
            
            <div class="input-methods">
                <div class="input-method active" data-method="single">
                    <h4>单个添加</h4>
                    <div class="single-input">
                        <input type="url" id="single-url-input" placeholder="输入网页URL..." />
                        <button id="add-single-url" class="btn btn-primary">添加</button>
                    </div>
                </div>
                
                <div class="input-method" data-method="bulk">
                    <h4>批量添加</h4>
                    <textarea id="bulk-url-input" placeholder="每行一个URL...&#10;https://example.com/page1&#10;https://example.com/page2"></textarea>
                    <button id="add-bulk-urls" class="btn btn-primary">批量添加</button>
                </div>
                
                <div class="input-method" data-method="sitemap">
                    <h4>从站点地图导入</h4>
                    <div class="sitemap-input">
                        <input type="url" id="sitemap-url" placeholder="输入sitemap.xml URL..." />
                        <button id="import-sitemap" class="btn btn-primary">导入</button>
                    </div>
                </div>
            </div>
            
            <div class="method-tabs">
                <button class="method-tab active" data-method="single">单个</button>
                <button class="method-tab" data-method="bulk">批量</button>
                <button class="method-tab" data-method="sitemap">站点地图</button>
            </div>
        </section>

        <!-- URL List Section -->
        <section class="url-list-section">
            <div class="section-header">
                <h3>待检查URL列表</h3>
                <div class="list-actions">
                    <button id="clear-all-urls" class="btn btn-secondary btn-sm">清空</button>
                    <button id="remove-selected" class="btn btn-secondary btn-sm" disabled>删除选中</button>
                </div>
            </div>
            
            <div class="url-list-container">
                <div id="empty-list" class="empty-list">
                    <div class="empty-icon">📝</div>
                    <p>还没有添加URL</p>
                    <p class="empty-hint">使用上方的输入框添加要检查的网页URL</p>
                </div>
                
                <div id="url-list" class="url-list hidden">
                    <div class="list-header">
                        <label class="checkbox-container">
                            <input type="checkbox" id="select-all-urls">
                            <span class="checkmark"></span>
                        </label>
                        <span class="url-header">URL</span>
                        <span class="status-header">状态</span>
                        <span class="actions-header">操作</span>
                    </div>
                    <div id="url-items" class="url-items">
                        <!-- URL items will be populated dynamically -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Batch Check Controls -->
        <section class="batch-controls-section">
            <div class="check-settings">
                <div class="setting-group">
                    <label for="concurrent-limit">并发数量:</label>
                    <select id="concurrent-limit">
                        <option value="1">1 (慢速)</option>
                        <option value="3" selected>3 (推荐)</option>
                        <option value="5">5 (快速)</option>
                    </select>
                </div>
                <div class="setting-group">
                    <label for="delay-between">间隔时间:</label>
                    <select id="delay-between">
                        <option value="1000">1秒</option>
                        <option value="2000" selected>2秒</option>
                        <option value="5000">5秒</option>
                    </select>
                </div>
            </div>
            
            <div class="batch-actions">
                <button id="start-batch-check" class="btn btn-primary btn-large" disabled>
                    <span class="btn-text">开始批量检查</span>
                    <span class="btn-icon">▶️</span>
                </button>
                <button id="pause-batch-check" class="btn btn-secondary btn-large hidden">
                    <span class="btn-text">暂停检查</span>
                    <span class="btn-icon">⏸️</span>
                </button>
                <button id="stop-batch-check" class="btn btn-danger btn-large hidden">
                    <span class="btn-text">停止检查</span>
                    <span class="btn-icon">⏹️</span>
                </button>
            </div>
        </section>

        <!-- Progress Section -->
        <section id="progress-section" class="progress-section hidden">
            <div class="progress-header">
                <h3>检查进度</h3>
                <div class="progress-stats">
                    <span id="progress-current">0</span> / <span id="progress-total">0</span>
                </div>
            </div>
            
            <div class="progress-bar-container">
                <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill"></div>
                </div>
                <div class="progress-percentage">
                    <span id="progress-percent">0%</span>
                </div>
            </div>
            
            <div class="progress-details">
                <div class="progress-item">
                    <span class="progress-label">已完成:</span>
                    <span id="completed-count" class="progress-value">0</span>
                </div>
                <div class="progress-item">
                    <span class="progress-label">失败:</span>
                    <span id="failed-count" class="progress-value">0</span>
                </div>
                <div class="progress-item">
                    <span class="progress-label">剩余时间:</span>
                    <span id="estimated-time" class="progress-value">--</span>
                </div>
            </div>
            
            <div class="current-checking">
                <span class="current-label">正在检查:</span>
                <span id="current-url" class="current-url">--</span>
            </div>
        </section>

        <!-- Results Section -->
        <section id="results-section" class="results-section hidden">
            <div class="results-header">
                <h3>检查结果</h3>
                <div class="results-actions">
                    <button id="export-results" class="btn btn-primary">导出结果</button>
                    <button id="view-summary" class="btn btn-secondary">查看汇总</button>
                </div>
            </div>
            
            <div class="results-summary">
                <div class="summary-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="avg-score">--</div>
                        <div class="stat-label">平均得分</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number critical" id="total-critical">--</div>
                        <div class="stat-label">严重问题</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number high" id="total-high">--</div>
                        <div class="stat-label">高优先级</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="success-rate">--</div>
                        <div class="stat-label">成功率</div>
                    </div>
                </div>
            </div>
            
            <div class="results-filters">
                <div class="filter-group">
                    <label>排序:</label>
                    <select id="sort-results">
                        <option value="score-desc">得分 (高到低)</option>
                        <option value="score-asc">得分 (低到高)</option>
                        <option value="issues-desc">问题数 (多到少)</option>
                        <option value="url">URL (字母序)</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>筛选:</label>
                    <select id="filter-results">
                        <option value="all">全部结果</option>
                        <option value="success">成功检查</option>
                        <option value="failed">检查失败</option>
                        <option value="low-score">低分页面 (<60)</option>
                        <option value="critical-issues">有严重问题</option>
                    </select>
                </div>
            </div>
            
            <div id="results-list" class="results-list">
                <!-- Results will be populated dynamically -->
            </div>
        </section>
    </div>
    
    <script src="../src/popup/batch-check.js"></script>
</body>
</html>